---
kind: ValidatingWebhookConfiguration
apiVersion: admissionregistration.k8s.io/v1beta1
metadata:
  name: validating-webhook
webhooks:
  - name: opa.validating.webhook
    namespaceSelector:
      matchLabels:
        validate: "true"
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["network.as.a.service"]
        apiVersions: ["*"]
        resources: ["interfaces"]
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFVENDQWZtZ0F3SUJBZ0lVUE1CaU91K1RrOERPZWJzYnhDNFI2Qm0yOUlNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0Z6RVZNQk1HQTFVRUF3d01ZV1J0YVhOemFXOXVYMk5oTUNBWERURTVNRFl5TnpJd05UUXhPVm9ZRHpJeQpPVE13TkRFeE1qQTFOREU1V2pBWE1SVXdFd1lEVlFRRERBeGhaRzFwYzNOcGIyNWZZMkV3Z2dFaU1BMEdDU3FHClNJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUM1dE1ubVB4TnFFR2U0dWRMa0tUcnVYTThqTXVtaTlHREEKRjcvZEp4Zmcva0lCV2ZLOStpU3ZEck5OaWJEOTdtOHlSUFY1U0xoREtMZVZQdXkzclRLeDQwSEhyVFhhZyt4NApONHVSdkVxZExjTTY2UmNEd01kaXVqUHBuaHpFSHRsTVNWNUpHR2t2TUg0NzZiQmJKUmRaQUxYM01WZnRtUjFHClBkSFljRDJpeFI4SzNUSTFQa01qbnhQQ2FQZ1lQdWllYTI1RnVPV2tDdG4yZWlrUlBkcm9jVEVZN0czWit0SXcKeGhMVDBoNEhPYzVnQ05JVk15MTJtQXFTY29oNXF4RjZZeURHeXpQNmh2TkdWQUN2b3lwamluWGJwM2VyL3RacgpNaE5YYS9wdHYrODhwWEdyTEFTRk04N1lRWnBYOGdvNVBiaG92REozSVpsc3VGQ3c3bUgzQWdNQkFBR2pVekJSCk1CMEdBMVVkRGdRV0JCUWhac3ZkaXIyVC9TamRRalZoazJiR0drYk1iVEFmQmdOVkhTTUVHREFXZ0JRaFpzdmQKaXIyVC9TamRRalZoazJiR0drYk1iVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQQpBNElCQVFBNGNPeWZlcXllK3I3RnJITzZ6RDZjQ2pKSC95NDZvdTVsV0czOXkxYUR4L2E0ODd2WEgvRDNCeGw2CjZ0S1pUNkp0ekt5MEFpeEszYmpkWEdjWTNudUd5ZlpUWGVUM0l0TWNZL2h4MzJ4S2tSYXBsdGp5K0hJcVhDWG4KNGx4WXdEekFwVW9kQitPQi8wVzdZRlJibWtRMi9lTGljS05SemNlWDl1UmFiTG5XMEhzL2lsN3doaERxZE82bgpXZjk0d3ZEbFJCbmM1cDhaY3JQRHdQUHlsUC85VWU2Rm5uTkVCYXRQSU8yd2VqV0FUTXZuYXdHbzdabnhIL2c3CllNc2I5Q1N1UDZqMDJVMHp1UUlxYXlEM2YzVllEVkJ2dlo0alNGTkJpUXFvQi9WYXRqd0svTkt2Ym5GNjBLK3IKWTN1RnAvdi93bnFwNDY2TDZORGx4cWk0QkpTSQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        namespace: opa
        name: validate
---
kind: MutatingWebhookConfiguration
apiVersion: admissionregistration.k8s.io/v1beta1
metadata:
  name: mutating-webhook
webhooks:
  - name: http.mutating.webhook
    namespaceSelector:
      matchLabels:
        mutate: "true"
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: ["network.as.a.service"]
        apiVersions: ["*"]
        resources: ["interfaces"]
    clientConfig:
      caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURFVENDQWZtZ0F3SUJBZ0lVUE1CaU91K1RrOERPZWJzYnhDNFI2Qm0yOUlNd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0Z6RVZNQk1HQTFVRUF3d01ZV1J0YVhOemFXOXVYMk5oTUNBWERURTVNRFl5TnpJd05UUXhPVm9ZRHpJeQpPVE13TkRFeE1qQTFOREU1V2pBWE1SVXdFd1lEVlFRRERBeGhaRzFwYzNOcGIyNWZZMkV3Z2dFaU1BMEdDU3FHClNJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUM1dE1ubVB4TnFFR2U0dWRMa0tUcnVYTThqTXVtaTlHREEKRjcvZEp4Zmcva0lCV2ZLOStpU3ZEck5OaWJEOTdtOHlSUFY1U0xoREtMZVZQdXkzclRLeDQwSEhyVFhhZyt4NApONHVSdkVxZExjTTY2UmNEd01kaXVqUHBuaHpFSHRsTVNWNUpHR2t2TUg0NzZiQmJKUmRaQUxYM01WZnRtUjFHClBkSFljRDJpeFI4SzNUSTFQa01qbnhQQ2FQZ1lQdWllYTI1RnVPV2tDdG4yZWlrUlBkcm9jVEVZN0czWit0SXcKeGhMVDBoNEhPYzVnQ05JVk15MTJtQXFTY29oNXF4RjZZeURHeXpQNmh2TkdWQUN2b3lwamluWGJwM2VyL3RacgpNaE5YYS9wdHYrODhwWEdyTEFTRk04N1lRWnBYOGdvNVBiaG92REozSVpsc3VGQ3c3bUgzQWdNQkFBR2pVekJSCk1CMEdBMVVkRGdRV0JCUWhac3ZkaXIyVC9TamRRalZoazJiR0drYk1iVEFmQmdOVkhTTUVHREFXZ0JRaFpzdmQKaXIyVC9TamRRalZoazJiR0drYk1iVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQ3dVQQpBNElCQVFBNGNPeWZlcXllK3I3RnJITzZ6RDZjQ2pKSC95NDZvdTVsV0czOXkxYUR4L2E0ODd2WEgvRDNCeGw2CjZ0S1pUNkp0ekt5MEFpeEszYmpkWEdjWTNudUd5ZlpUWGVUM0l0TWNZL2h4MzJ4S2tSYXBsdGp5K0hJcVhDWG4KNGx4WXdEekFwVW9kQitPQi8wVzdZRlJibWtRMi9lTGljS05SemNlWDl1UmFiTG5XMEhzL2lsN3doaERxZE82bgpXZjk0d3ZEbFJCbmM1cDhaY3JQRHdQUHlsUC85VWU2Rm5uTkVCYXRQSU8yd2VqV0FUTXZuYXdHbzdabnhIL2c3CllNc2I5Q1N1UDZqMDJVMHp1UUlxYXlEM2YzVllEVkJ2dlo0alNGTkJpUXFvQi9WYXRqd0svTkt2Ym5GNjBLK3IKWTN1RnAvdi93bnFwNDY2TDZORGx4cWk0QkpTSQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
      service:
        namespace: mutate
        name: mutate
